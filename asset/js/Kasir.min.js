function getPromo(check){var checked=check;$.ajax({url:link+"/getPromo",type:"POST",data:{checked:checked},dataType:"json",success:function(result){$("#p_promo").html(result.data)}})}function sumtotal(){$.ajax({url:link+"/getSum",contentType:"application/json; charset=utf-8",type:"POST",dataType:"json",success:function(result){$("#sumtotal").val(result.data.sumtotal),$("#no_order").val(result.data.no_order)}})}var table;function myFunction(){var input,filter,table,tr,td,i,txtValue;for(filter=(input=document.getElementById("myInput")).value.toUpperCase(),tr=(table=document.getElementById("viewModals")).getElementsByTagName("div"),i=0;i<tr.length;i++)(td=tr[i].getElementsByTagName("button")[0])&&((txtValue=td.textContent||td.innerText).toUpperCase().indexOf(filter)>-1?tr[i].style.display="":tr[i].style.display="none")}$((function(){"use strict";sumtotal(),getPromo(0)})),$('input[type="checkbox"]').click((function(){1==$(this).prop("checked")?(getPromo(1),$("#diskon").prop("readonly",!0),$("#diskon").val("")):0==$(this).prop("checked")&&(getPromo(0),$("#diskon").prop("readonly",!1))})),$(".makanans").click((function(){$("#barang").val($(this).val()),$("#btn-submit").click((function(){var data=$("#dataproduk").serialize();data+="&qty="+$("#qty").val(),data+="&customer="+$("#customer").val(),data+="&diskon="+$("#diskon").val(),data+="&p_promo="+$("#p_promo").val(),$.ajax({url:link+"/addProduct",type:"POST",data:data,success:function(response){console.log(response),$("#qty").val(""),$("#tbl_data").DataTable().ajax.reload(null,!1),sumtotal()}})}))})),$((function(){$("#tbl_data").on("click",".btn_hapus",(function(){var id=$(this).attr("data-id"),status;confirm("Yakin ingin menghapus?")&&$.ajax({url:link+"/hapusDataDetail",type:"POST",data:{id:id},success:function(response){$("#tbl_data").DataTable().ajax.reload(null,!1)}})})),$("#pembayaran").click((function(event){var data=$("#form-submit").serialize();""==$("#customer").val()?(event.preventDefault(),showMsg("Wajib masukkan nama customer."),$("html, body").animate({scrollTop:0},"slow")):$.ajax({type:"POST",url:link+"/updateData",data:data,success:function(response){$("#tbl_data").DataTable().ajax.reload(null,!1)}})})),$("#reset").click((function(){$.ajax({type:"POST",url:link+"/reset",success:function(response){$("#tbl_data").DataTable().ajax.reload(null,!1)}})})),$("#tbl_data").on("click",".btn_edit",(function(){var id=$(this).attr("data-id");$.ajax({url:link+"/ambilDataById",type:"POST",data:{id:id},dataType:"json",success:function(response){$("#editModal").modal("show"),$('input[name="id_edit"]').val(response[0].id),$('input[name="email_edit"]').val(response[0].email),$('input[name="firstname_edit"]').val(response[0].firstname),$('input[name="lastname_edit"]').val(response[0].lastname),$("#tbl_data").DataTable().ajax.reload(null,!1)}})})),$("#btn_update_data").on("click",(function(){var id=$('input[name="id_edit"]').val(),email=$('input[name="email_edit"]').val(),firstname=$('input[name="firstname_edit"]').val(),lastname=$('input[name="lastname_edit"]').val();$.ajax({url:link+"/perbaruiData",type:"POST",data:{id:id,email:email,firstname:firstname,lastname:lastname},success:function(response){$('input[name="id_edit"]').val(""),$('input[name="email_edit"]').val(""),$('input[name="firstname_edit"]').val(""),$('input[name="lastname_edit"]').val(""),$("#editModal").modal("hide"),$("#tbl_data").DataTable().ajax.reload(null,!1)}})}))})),$((function(){$(document).ready((function(){var link=$(location).attr("pathname");table=$("#tbl_data").DataTable({responsive:!0,processing:!1,serverSide:!0,autoWidth:!1,sScrollY:"270",bSort:!1,searching:!1,paging:!1,info:!0,iDisplayLength:10,bLengthChange:!1,order:[],ajax:{url:link+"/get_data",type:"POST"},language:{zeroRecords:"Daftar Pesanan Kasir"},columnDefs:[{targets:[0,3],orderable:!1},{targets:-1,width:"30",orderable:!1}]})}))}));